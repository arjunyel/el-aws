<h3 class="drawer-header">

  <div class="icon">

    <fa-icon
      [icon]="desc.icon.split(' ')"
      [ngStyle]="{color: desc.color}"
      *ngIf="desc.icon"
      size="lg">
    </fa-icon>

  </div>

  <div class="title">
    {{ desc.name | libBreakable }}
  </div>

</h3>

<form
  (submit)="close()"
  [formGroup]="propsForm"
  [libRxfSubmit]="propsForm"
  *ngIf="propsForm"
  novalidate>

  <input
    formControlName="path"
    type="hidden">

  <mat-accordion>

    <!-- ACCELERATE -->

    <mat-expansion-panel
      formGroupName="accelerate">

      <mat-expansion-panel-header>
        <mat-panel-title>
          Acceleration
          <div class="drawer-label">
            {{ metadata?.acceleration?.Status || 'Off' }}
          </div>
        </mat-panel-title>
      </mat-expansion-panel-header>

      <mat-radio-group
        class="group"
        formControlName="Status">

        <div class="drawer-label">
          Use endpoint <a>{{ desc.name }}.s3-accelerate.amazonaws.com</a> for faster data transfers, which will incur an additional fee.
        </div>

        <mat-radio-button value="Enabled">
          Enable acceleration
        </mat-radio-button>
        <mat-radio-button value="Suspended">
          Suspend acceleration
        </mat-radio-button>

      </mat-radio-group>

    </mat-expansion-panel>

    <!-- TAGGING -->

    <mat-expansion-panel
      formGroupName="tagging">

      <mat-expansion-panel-header>
        <mat-panel-title>
          Tags
          <div class="drawer-label">
            {{ metadata?.tagging?.TagSet?.length? 'TBD'  : 'None' }}
          </div>
        </mat-panel-title>
      </mat-expansion-panel-header>

      <elaws-key-value
        [asArrayOfHashes]="['Key', 'Value']"
        duplicateKeyMessage="Tag name is already in use"
        formControlName="TagSet"
        placeholder="New tag name">

        <ng-template #keyIcon>
          <fa-icon
            [icon]="['fas', 'key']"
            flip="horizontal"
            size="xs"
            style="color: var(--primary-color)">
          </fa-icon>
          &nbsp;
        </ng-template>

        <ng-template #valueIcon>
          <fa-icon
            [icon]="['fas', 'tag']"
            size="xs"
            style="color: var(--primary-color)">
          </fa-icon>
          &nbsp;
        </ng-template>

      </elaws-key-value>

    </mat-expansion-panel>

    <!-- VERSIONING -->

    <mat-expansion-panel
      formGroupName="versioning">

      <mat-expansion-panel-header>
        <mat-panel-title>
          Versioning
          <div class="drawer-label">
            {{ metadata?.versioning?.Status || 'Off' }}
          </div>
        </mat-panel-title>
      </mat-expansion-panel-header>

      <mat-radio-group
        class="group"
        formControlName="Status">

        <mat-radio-button value="Enabled">
          Enable versioning
        </mat-radio-button>
        <mat-radio-button value="Suspended">
          Suspend versioning
          <div class="drawer-label">
            This suspends the creation of object versions for all operations but preserves any existing object versions.
          </div>
        </mat-radio-button>

      </mat-radio-group>

    </mat-expansion-panel>

  </mat-accordion>

  <div class="okAndCancel">

    <a
      (click)="close()"
      mat-button>
      Cancel
    </a>

    <button
      [disabled]="propsForm.invalid || !metadata"
      color="primary"
      mat-raised-button
      type="submit">
      OK
    </button>

  </div>

</form>
