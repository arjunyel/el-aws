<lib-drawer-container>

  <elaws-header
    [prefs]="ctrl.prefs$ | async"
    [view]="ctrl.view$ | async">
  </elaws-header>

  <elaws-tree
    (createBucket)="createBucketDrawer.open()"
    (editBucketProps)="bucketPropsDrawer.open($event)"
    (editFileProps)="filePropsDrawer.open($event)"
    [hydratorMargin]="'100px'" 
    [hydratorTrace]="true"
    [prefs]="ctrl.prefs$ | async"
    [s3]="ctrl.s3$ | async"
    [s3meta]="ctrl.s3meta$ | async"
    [selection]="ctrl.selection$ | async"
    [view]="ctrl.view$ | async"
    #tree
    libHydrator>
  </elaws-tree>

  <lib-drawer-panel
    #bucketPropsDrawer
    position="left"> 

    <elaws-bucket-props
      [prefs]="ctrl.prefs$ | async"
      [s3meta]="ctrl.s3meta$ | async"
      #bucketProps>
    </elaws-bucket-props>  

  </lib-drawer-panel>

  <lib-drawer-panel
    #createBucketDrawer
    position="left"> 

    <elaws-create-bucket
      #createBucket>
    </elaws-create-bucket>  

  </lib-drawer-panel>

  <lib-drawer-panel
    #filePropsDrawer
    position="left"> 

    <elaws-file-props
      [prefs]="ctrl.prefs$ | async"
      [s3meta]="ctrl.s3meta$ | async"
      #fileProps>
    </elaws-file-props>  

  </lib-drawer-panel>

  <lib-drawer-panel
    #viewDrawer
    position="right"> 

    <elaws-view
      [view]="ctrl.view$ | async"
      #view>
    </elaws-view>  

  </lib-drawer-panel>

</lib-drawer-container> 

<elaws-s3-ctrl
  (openView)="viewDrawer.open()"
  [bucketPropsForm]="bucketProps.propsForm?.valueChanges | async"
  [createBucketForm]="createBucket.createForm?.valueChanges | async"
  [filePropsForm]="fileProps.propsForm?.valueChanges | async"
  [viewForm]="view.viewForm.valueChanges | async"
  #ctrl>
</elaws-s3-ctrl> 

